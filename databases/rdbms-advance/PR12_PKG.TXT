CREATE OR REPLACE PACKAGE P1 IS
PROCEDURE GetUser(tSpace VARCHAR2);
FUNCTION GetStatus(Obj VARCHAR2,ObjOwner VARCHAR2) RETURN VARCHAR2;
END P1;


CREATE OR REPLACE PACKAGE  BODY P1 IS
PROCEDURE GetUser(tSpace VARCHAR2) IS
 CURSOR C1 IS
           SELECT USERNAME FROM DBA_USERS WHERE DEFAULT_TABLESPACE=tSPACE;
        REC C1%ROWTYPE;
       BEGIN
        OPEN C1;
        DBMS_OUTPUT.PUT_LINE('USERNAME');
           LOOP
          FETCH C1 INTO REC;
           EXIT WHEN C1%NOTFOUND;
           DBMS_OUTPUT.PUT_LINE(REC.USERNAME);
        END LOOP;
CLOSE C1;
 END GetUser;
FUNCTION GetStatus(Obj VARCHAR2,ObjOwner VARCHAR2) RETURN VARCHAR2 IS
CURSOR C1 IS
        SELECT STATUS FROM DBA_OBJECTS WHERE OBJECT_TYPE=Obj AND OWNER=ObjOwner;
REC C1%ROWTYPE;
BEGIN
        OPEN C1;
        LOOP
        FETCH C1 INTO REC;
        EXIT WHEN C1%NOTFOUND;
        RETURN REC.STATUS;
        END LOOP;
CLOSE C1;
END GetStatus;
END P1;
/
