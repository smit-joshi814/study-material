 CREATE OR REPLACE PROCEDURE RESTRICT_USER(NAME VARCHAR2,ACTION VARCHAR2) IS
  C NUMBER;
  BEGIN
  SELECT COUNT(*) INTO C FROM PRODUCT_USER_PROFILE WHERE USERID=NAME AND ATTRIBUTE=ACTION;
  IF (C=0) THEN
     INSERT INTO PRODUCT_USER_PROFILE(PRODUCT,USERID,ATTRIBUTE,CHAR_VALUE) VALUES('SQL*PLUS',NAME,ACTION,'DISABLED');
     DBMS_OUTPUT.PUT_LINE(NAME||' RESTRICTED SUCCESSFULLY ON '||ACTION);
  ELSE
     DELETE FROM PRODUCT_USER_PROFILE WHERE USERID=NAME AND ATTRIBUTE=ACTION;
     DBMS_OUTPUT.PUT_LINE('NOW '||NAME||' CAN USE '||ACTION);
  END IF;
COMMIT;
END RESTRICT_USER;
/
